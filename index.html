<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background: #1a1a1a;
            min-height: 100vh;
            padding: 15px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 28px;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
            overflow: hidden;
        }

        .header {
            background: #2d3748;
            color: white;
            padding: 24px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            font-weight: 600;
        }

        .header p {
            color: #a0aec0;
            margin-top: 8px;
        }

        .login-section {
            padding: 24px;
            background: #f7fafc;
            border-bottom: 1px solid #e2e8f0;
        }

        .login-form {
            display: flex;
            gap: 12px;
            max-width: 400px;
            margin: 0 auto;
        }

        .login-form input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 14px;
            font-size: 16px;
        }

        .login-form input:focus {
            outline: none;
            border-color: #4299e1;
        }

        .login-form button {
            padding: 12px 24px;
            background: #4299e1;
            color: white;
            border: none;
            border-radius: 14px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }

        .login-form button:hover {
            background: #3182ce;
        }

        .user-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            background: #edf2f7;
            border-bottom: 1px solid #cbd5e0;
        }

        .user-name {
            font-weight: 600;
            color: #2d3748;
        }

        .logout-btn {
            padding: 8px 20px;
            background: #e53e3e;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 500;
        }

        .logout-btn:hover {
            background: #c53030;
        }

        .main-grid {
            padding: 24px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .card {
            background: #f7fafc;
            border-radius: 20px;
            padding: 24px;
            border: 1px solid #e2e8f0;
        }

        .card h2 {
            font-size: 1.3em;
            color: #2d3748;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .date-input {
            width: 100%;
            padding: 14px;
            border: 2px solid #e2e8f0;
            border-radius: 14px;
            font-size: 16px;
            margin-bottom: 20px;
        }

        .time-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            max-height: 320px;
            overflow-y: auto;
            padding: 8px;
            background: white;
            border-radius: 16px;
            border: 1px solid #e2e8f0;
            margin-bottom: 20px;
        }

        .time-btn {
            padding: 12px 4px;
            text-align: center;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-weight: 600;
            color: #2d3748;
            cursor: pointer;
            transition: all 0.1s;
        }

        .time-btn.available:hover {
            border-color: #4299e1;
            background: #ebf8ff;
        }

        .time-btn.selected {
            background: #4299e1;
            border-color: #4299e1;
            color: white;
        }

        .time-btn.booked {
            background: #fed7d7;
            border-color: #fc8181;
            color: #c53030;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .time-btn.my-booking {
            background: #c6f6d5;
            border-color: #68d391;
            color: #276749;
            cursor: not-allowed;
        }

        .duration-block {
            background: white;
            border-radius: 16px;
            padding: 20px;
            border: 1px solid #e2e8f0;
            margin: 20px 0;
        }

        .duration-block input {
            width: 100%;
            margin: 15px 0 10px;
            accent-color: #4299e1;
        }

        .duration-value {
            font-size: 1.3em;
            font-weight: 700;
            color: #4299e1;
            text-align: center;
        }

        .book-btn {
            width: 100%;
            padding: 18px;
            background: #48bb78;
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 1.3em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }

        .book-btn:hover:not(:disabled) {
            background: #38a169;
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(72, 187, 120, 0.3);
        }

        .book-btn:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .selection-info {
            background: white;
            border-radius: 16px;
            padding: 20px;
            border: 2px dashed #4299e1;
            text-align: center;
            font-size: 1.1em;
            color: #2d3748;
        }

        .appointments-section {
            grid-column: 1 / -1;
            background: #f7fafc;
            border-radius: 20px;
            padding: 24px;
            border: 1px solid #e2e8f0;
        }

        .table-wrapper {
            overflow-x: auto;
            background: white;
            border-radius: 16px;
            border: 1px solid #e2e8f0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: #4299e1;
            color: white;
            padding: 16px;
            font-weight: 600;
        }

        td {
            padding: 14px 16px;
            border-bottom: 1px solid #e2e8f0;
            color: #2d3748;
        }

        tr:last-child td {
            border-bottom: none;
        }

        .my-row {
            background: #c6f6d5;
        }

        .my-row td:first-child {
            border-left: 4px solid #48bb78;
        }

        .admin-panel {
            grid-column: 1 / -1;
            background: #feebc8;
            border-radius: 20px;
            padding: 24px;
            border: 2px solid #fbd38d;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .admin-header h2 {
            color: #c05621;
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
            margin: 20px 0;
        }

        .stat-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            border: 1px solid #fbd38d;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: 700;
            color: #dd6b20;
            margin-top: 8px;
        }

        .clear-btn {
            padding: 12px 32px;
            background: #e53e3e;
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
        }

        .clear-btn:hover {
            background: #c53030;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            background: #48bb78;
            color: white;
            border-radius: 12px;
            font-weight: 600;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.2);
            display: none;
            z-index: 1000;
        }

        .toast.error {
            background: #e53e3e;
        }

        .footer {
            text-align: center;
            padding: 20px;
            background: #f7fafc;
            color: #718096;
            border-top: 1px solid #e2e8f0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π</h1>
            <p>–í—Å–µ –∑–∞–ø–∏—Å–∏ –æ–±—â–∏–µ –∏ –≤–∏–¥–Ω—ã –≤—Å–µ–º</p>
        </div>

        <!-- –í—Ö–æ–¥ -->
        <div id="loginSection" class="login-section">
            <div class="login-form">
                <input type="text" id="studentName" placeholder="–í–≤–µ–¥–∏ —Å–≤–æ—ë –∏–º—è" autocomplete="off">
                <button onclick="handleLogin()">–í–æ–π—Ç–∏</button>
            </div>
        </div>

        <!-- –ò–Ω—Ñ–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
        <div id="userBar" class="user-bar" style="display: none;">
            <span class="user-name" id="welcomeMessage"></span>
            <button class="logout-btn" onclick="handleLogout()">–í—ã–π—Ç–∏</button>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div id="mainContent" style="display: none;">
            <div class="main-grid">
                <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –≤—ã–±–æ—Ä -->
                <div class="card">
                    <h2>üìÖ 1. –í—ã–±–µ—Ä–∏ –¥–∞—Ç—É</h2>
                    <input type="date" id="datePicker" class="date-input" onchange="handleDateChange()">

                    <h2>‚è∞ 2. –í—ã–±–µ—Ä–∏ –≤—Ä–µ–º—è</h2>
                    <div id="timeSlots" class="time-grid">
                        <!-- –°—é–¥–∞ –±—É–¥—É—Ç –ø–æ–¥–≥—Ä—É–∂–∞—Ç—å—Å—è –∫–Ω–æ–ø–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ -->
                    </div>

                    <h2>‚è≥ 3. –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω)</h2>
                    <div class="duration-block">
                        <input type="range" id="durationSlider" min="15" max="180" step="15" value="60" oninput="updateDurationDisplay()">
                        <div class="duration-value" id="durationDisplay">60 –º–∏–Ω</div>
                    </div>

                    <button id="bookBtn" class="book-btn" onclick="handleBooking()" disabled>‚úÖ –ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button>
                </div>

                <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <div class="card">
                    <h2>üìå –¢–≤–æ–π –≤—ã–±–æ—Ä</h2>
                    <div id="selectionInfo" class="selection-info">
                        –ù–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ
                    </div>
                </div>

                <!-- –¢–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π -->
                <div class="appointments-section">
                    <h2>üìã –í—Å–µ –∑–∞–ø–∏—Å–∏</h2>
                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>–î–∞—Ç–∞</th>
                                    <th>–ù–∞—á–∞–ª–æ</th>
                                    <th>–ö–æ–Ω–µ—Ü</th>
                                    <th>–£—á–µ–Ω–∏–∫</th>
                                </tr>
                            </thead>
                            <tbody id="appointmentsTable">
                                <tr><td colspan="4" style="text-align: center; padding: 40px;">–ó–∞–≥—Ä—É–∑–∫–∞...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å -->
                <div id="adminPanel" class="admin-panel" style="display: none;">
                    <div class="admin-header">
                        <h2>üîê –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
                        <button class="clear-btn" onclick="handleClearAll()">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë</button>
                    </div>
                    <div id="adminStats" class="admin-stats"></div>
                </div>
            </div>
        </div>

        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
        <div id="toast" class="toast"></div>

        <div class="footer">
            ‚è∞ –ú–æ—Å–∫–æ–≤—Å–∫–æ–µ –≤—Ä–µ–º—è ‚Ä¢ —à–∞–≥ 15 –º–∏–Ω—É—Ç ‚Ä¢ –∑–∞–Ω—è—Ç–∏—è –¥–æ 180 –º–∏–Ω—É—Ç
        </div>
    </div>

    <script>
        // ==================== –ù–ê–°–¢–†–û–ô–ö–ò ====================
        const BIN_ID = '698f465fd0ea881f40b7d3e6';
        const API_KEY = '$2a$10$A3hHJ1g7sjF5BuwT2drIKewRvsdMFx0iy8Jn6wpFPse5ciB.bR9n.';
        
        // ==================== –ü–ï–†–ï–ú–ï–ù–ù–´–ï ====================
        let appointments = [];
        let currentUser = null;
        let isAdmin = false;
        let selectedDate = null;
        let selectedTime = null;
        let selectedDuration = 60;
        let isLoading = false;

        // ==================== –ó–ê–ì–†–£–ó–ö–ê –ò –°–û–•–†–ê–ù–ï–ù–ò–ï ====================
        async function loadAppointments() {
            try {
                const response = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, {
                    headers: { 'X-Master-Key': API_KEY }
                });
                
                if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏');
                
                const data = await response.json();
                appointments = Array.isArray(data.record) ? data.record : [];
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                appointments = [];
                showToast('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö', 'error');
            }
            
            renderAppointments();
            renderTimeSlots();
            updateAdminStats();
        }

        async function saveAppointments() {
            if (isLoading) return;
            
            isLoading = true;
            
            try {
                const response = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}`, {
                    method: 'PUT',
                    headers: { 
                        'Content-Type': 'application/json',
                        'X-Master-Key': API_KEY 
                    },
                    body: JSON.stringify(appointments)
                });
                
                if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è');
                
                // –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ä–∞–∑—É –∑–∞–≥—Ä—É–∂–∞–µ–º —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ
                await loadAppointments();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                showToast('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è', 'error');
            } finally {
                isLoading = false;
            }
        }

        // ==================== –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ====================
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast ' + (type === 'error' ? 'error' : '');
            toast.style.display = 'block';
            
            setTimeout(() => {
                toast.style.display = 'none';
            }, 3000);
        }

        // ==================== –í–•–û–î/–í–´–•–û–î ====================
        function handleLogin() {
            const name = document.getElementById('studentName').value.trim();
            
            if (!name) {
                showToast('–í–≤–µ–¥–∏—Ç–µ –∏–º—è', 'error');
                return;
            }

            if (name.toLowerCase() === 'admin') {
                const password = prompt('–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:');
                if (password === 'admin123') {
                    isAdmin = true;
                } else {
                    showToast('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å', 'error');
                    return;
                }
            }

            currentUser = name;
            
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('userBar').style.display = 'flex';
            document.getElementById('mainContent').style.display = 'block';
            document.getElementById('welcomeMessage').textContent = `${currentUser}${isAdmin ? ' (–∞–¥–º–∏–Ω)' : ''}`;
            
            if (isAdmin) {
                document.getElementById('adminPanel').style.display = 'block';
            }
            
            loadAppointments();
        }

        function handleLogout() {
            currentUser = null;
            isAdmin = false;
            selectedDate = null;
            selectedTime = null;
            
            document.getElementById('loginSection').style.display = 'block';
            document.getElementById('userBar').style.display = 'none';
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('datePicker').value = '';
            document.getElementById('bookBtn').disabled = true;
            document.getElementById('selectionInfo').innerHTML = '–ù–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ';
        }

        // ==================== –†–ê–ë–û–¢–ê –° –î–ê–¢–û–ô –ò –í–†–ï–ú–ï–ù–ï–ú ====================
        function handleDateChange() {
            if (!currentUser) return;
            
            selectedDate = document.getElementById('datePicker').value;
            selectedTime = null;
            document.getElementById('bookBtn').disabled = true;
            
            renderTimeSlots();
            updateSelectionInfo();
        }

        function renderTimeSlots() {
            const container = document.getElementById('timeSlots');
            
            if (!selectedDate) {
                container.innerHTML = '<p style="grid-column: span 4; text-align: center; padding: 20px;">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏ –¥–∞—Ç—É</p>';
                return;
            }

            let html = '';
            
            for (let hour = 0; hour < 24; hour++) {
                for (let minute = 0; minute < 60; minute += 15) {
                    const time = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–Ω—è—Ç–æ –ª–∏ –≤—Ä–µ–º—è
                    const booking = appointments.find(a => a.date === selectedDate && a.time === time);
                    const isBooked = !!booking;
                    const isMyBooking = isBooked && booking.student === currentUser;
                    const isSelected = selectedTime === time;
                    
                    let btnClass = 'time-btn';
                    
                    if (isBooked) {
                        btnClass += isMyBooking ? ' my-booking' : ' booked';
                    } else {
                        btnClass += ' available';
                    }
                    
                    if (isSelected && !isBooked) {
                        btnClass += ' selected';
                    }
                    
                    const clickHandler = !isBooked ? `selectTime('${time}')` : '';
                    
                    html += `<div class="${btnClass}" onclick="${clickHandler}">${time}</div>`;
                }
            }
            
            container.innerHTML = html;
        }

        function selectTime(time) {
            selectedTime = time;
            document.getElementById('bookBtn').disabled = false;
            renderTimeSlots();
            updateSelectionInfo();
        }

        function updateDurationDisplay() {
            selectedDuration = parseInt(document.getElementById('durationSlider').value);
            document.getElementById('durationDisplay').textContent = selectedDuration + ' –º–∏–Ω';
            updateSelectionInfo();
        }

        function calculateEndTime(startTime, minutes) {
            const [hours, mins] = startTime.split(':').map(Number);
            const total = hours * 60 + mins + minutes;
            const endHours = Math.floor(total / 60) % 24;
            const endMins = total % 60;
            return `${endHours.toString().padStart(2, '0')}:${endMins.toString().padStart(2, '0')}`;
        }

        function updateSelectionInfo() {
            if (selectedDate && selectedTime) {
                const endTime = calculateEndTime(selectedTime, selectedDuration);
                document.getElementById('selectionInfo').innerHTML = `
                    üìÖ ${selectedDate}<br>
                    ‚è∞ ${selectedTime} ‚Üí ${endTime}<br>
                    ‚è≥ ${selectedDuration} –º–∏–Ω—É—Ç
                `;
            } else {
                document.getElementById('selectionInfo').innerHTML = '–ù–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ';
            }
        }

        // ==================== –ó–ê–ü–ò–°–¨ ====================
        async function handleBooking() {
            if (!currentUser || !selectedDate || !selectedTime) return;
            
            const endTime = calculateEndTime(selectedTime, selectedDuration);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ
            const hasOverlap = appointments.some(apt => {
                if (apt.date !== selectedDate) return false;
                
                const aptEnd = calculateEndTime(apt.time, apt.duration);
                return (selectedTime < aptEnd && endTime > apt.time);
            });
            
            if (hasOverlap) {
                showToast('–≠—Ç–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º –∑–∞–Ω—è—Ç–∏–µ–º', 'error');
                return;
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å
            appointments.push({
                date: selectedDate,
                time: selectedTime,
                duration: selectedDuration,
                student: currentUser,
                endTime: endTime
            });
            
            await saveAppointments();
            
            showToast('‚úÖ –¢—ã –∑–∞–ø–∏—Å–∞–Ω!');
            
            selectedTime = null;
            document.getElementById('bookBtn').disabled = true;
            updateSelectionInfo();
        }

        // ==================== –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –ó–ê–ü–ò–°–ï–ô ====================
        function renderAppointments() {
            const tbody = document.getElementById('appointmentsTable');
            
            if (!appointments.length) {
                tbody.innerHTML = '<tr><td colspan="4" style="text-align: center; padding: 40px;">–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π</td></tr>';
                return;
            }
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–∞—Ç–µ –∏ –≤—Ä–µ–º–µ–Ω–∏
            const sorted = [...appointments].sort((a, b) => {
                return (a.date + ' ' + a.time).localeCompare(b.date + ' ' + b.time);
            });
            
            let html = '';
            
            sorted.forEach(apt => {
                const isMy = apt.student === currentUser;
                const endTime = calculateEndTime(apt.time, apt.duration);
                
                html += `<tr class="${isMy ? 'my-row' : ''}">
                    <td>${apt.date}</td>
                    <td>${apt.time}</td>
                    <td>${endTime}</td>
                    <td>${apt.student}${isMy ? ' ‚≠ê' : ''}</td>
                </tr>`;
            });
            
            tbody.innerHTML = html;
        }

        // ==================== –ê–î–ú–ò–ù ====================
        function updateAdminStats() {
            if (!isAdmin) return;
            
            const total = appointments.length;
            const uniqueStudents = new Set(appointments.map(a => a.student)).size;
            const today = new Date().toISOString().split('T')[0];
            const todayCount = appointments.filter(a => a.date === today).length;
            
            document.getElementById('adminStats').innerHTML = `
                <div class="stat-card">
                    <div>–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π</div>
                    <div class="stat-number">${total}</div>
                </div>
                <div class="stat-card">
                    <div>–£—á–µ–Ω–∏–∫–æ–≤</div>
                    <div class="stat-number">${uniqueStudents}</div>
                </div>
                <div class="stat-card">
                    <div>–ù–∞ —Å–µ–≥–æ–¥–Ω—è</div>
                    <div class="stat-number">${todayCount}</div>
                </div>
            `;
        }

        async function handleClearAll() {
            if (!isAdmin) return;
            
            if (confirm('–¢–æ—á–Ω–æ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏?')) {
                appointments = [];
                await saveAppointments();
                showToast('–í—Å–µ –∑–∞–ø–∏—Å–∏ —É–¥–∞–ª–µ–Ω—ã');
            }
        }

        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å—Ä–∞–∑—É
        loadAppointments();
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
        setInterval(loadAppointments, 30000);
    </script>
</body>
</html>
